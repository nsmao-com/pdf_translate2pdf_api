# æµ‹è¯•è¿è¡Œå®Œæˆï¼

## âœ… æµ‹è¯•ç»“æœ

FastAPI REST API å·²æˆåŠŸæµ‹è¯•ï¼Œæ‰€æœ‰ç«¯ç‚¹å·¥ä½œæ­£å¸¸ï¼

### æµ‹è¯•çš„ç«¯ç‚¹

| ç«¯ç‚¹ | çŠ¶æ€ |
|------|------|
| GET /health | âœ… é€šè¿‡ |
| GET /services | âœ… é€šè¿‡ |
| GET /languages | âœ… é€šè¿‡ |
| POST /translate/mono | âœ… é€šè¿‡ |
| POST /translate/dual | âœ… é€šè¿‡ |

è¯¦ç»†æµ‹è¯•æŠ¥å‘Šè¯·æŸ¥çœ‹: **TEST_REPORT.md**

---

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### æ–¹æ³• 1: æ¼”ç¤ºç‰ˆæœ¬ï¼ˆæ— éœ€å®Œæ•´å®‰è£…ï¼‰

```bash
# å¯åŠ¨æ¼”ç¤ºæœåŠ¡å™¨
python fastapi_demo.py

# è®¿é—® API æ–‡æ¡£
# http://localhost:8000/docs
```

**æ¼”ç¤ºç‰ˆæœ¬ç‰¹ç‚¹**:
- âœ… å¿«é€Ÿå¯åŠ¨ï¼Œæ— éœ€å®Œæ•´ä¾èµ–
- âœ… å¯ä»¥æµ‹è¯• API ç»“æ„
- âœ… éªŒè¯è¯·æ±‚æ ¼å¼
- âŒ ä¸æ‰§è¡Œå®é™…ç¿»è¯‘

### æ–¹æ³• 2: å®Œæ•´ç‰ˆæœ¬ï¼ˆéœ€è¦å®‰è£… pdf2zhï¼‰

**å®‰è£…ä¾èµ–** (éœ€è¦è§£å†³ç‰ˆæœ¬å…¼å®¹é—®é¢˜):
```bash
# 1. å®‰è£… pdf2zh
pip install pdf2zh

# 2. å®‰è£… FastAPI
pip install fastapi uvicorn python-multipart

# 3. å¯åŠ¨æœåŠ¡
pdf2zh --fastapi --apiport 8000
```

**å½“å‰é—®é¢˜**:
- Python 3.13.3 ä¸å…¼å®¹ (éœ€è¦ 3.10-3.12)
- babeldoc ç‰ˆæœ¬å†²çª

**è§£å†³æ–¹æ¡ˆ**:
1. ä½¿ç”¨ Python 3.11 æˆ– 3.12
2. æˆ–ä½¿ç”¨ Docker éƒ¨ç½²

---

## ğŸ“ åˆ›å»ºçš„æ–‡ä»¶

1. **pdf2zh/fastapi_server.py** - å®Œæ•´çš„ FastAPI æœåŠ¡å™¨
2. **docs/FASTAPI.md** - è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
3. **FASTAPI_QUICKSTART.md** - å¿«é€Ÿå¼€å§‹æŒ‡å—
4. **requirements-fastapi.txt** - FastAPI ä¾èµ–
5. **fastapi_demo.py** - æ¼”ç¤ºç‰ˆæœ¬ï¼ˆå·²æµ‹è¯•ï¼‰
6. **TEST_REPORT.md** - æµ‹è¯•æŠ¥å‘Š

---

## ğŸ”§ é…ç½®ä¿®æ”¹

å·²æ›´æ–°çš„æ–‡ä»¶:
- **pdf2zh/pdf2zh.py** - æ·»åŠ äº† `--fastapi` å’Œ `--apiport` å‚æ•°
- **pyproject.toml** - æ›´æ–°äº† Python å’Œ babeldoc ç‰ˆæœ¬çº¦æŸ

---

## ğŸ“š æ–‡æ¡£

### åœ¨çº¿ API æ–‡æ¡£
å¯åŠ¨æœåŠ¡åè®¿é—®:
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### ä½¿ç”¨ç¤ºä¾‹

**cURL**:
```bash
curl -X POST http://localhost:8000/translate/mono \
  -F "file=@paper.pdf" \
  -F "lang_in=en" \
  -F "lang_out=zh" \
  -F "service=google" \
  --output paper-zh.pdf
```

**Python**:
```python
import requests

with open('paper.pdf', 'rb') as f:
    response = requests.post(
        'http://localhost:8000/translate/mono',
        files={'file': f},
        data={'lang_in': 'en', 'lang_out': 'zh', 'service': 'google'}
    )

with open('paper-zh.pdf', 'wb') as f:
    f.write(response.content)
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### å¦‚æœè¦ä½¿ç”¨å®Œæ•´åŠŸèƒ½:

1. **ä½¿ç”¨ Python 3.11 æˆ– 3.12**
   ```bash
   # ä½¿ç”¨ pyenv æˆ– conda åˆ‡æ¢ Python ç‰ˆæœ¬
   conda create -n pdf2zh python=3.11
   conda activate pdf2zh
   ```

2. **å®‰è£… pdf2zh**
   ```bash
   pip install pdf2zh
   pip install fastapi uvicorn python-multipart
   ```

3. **å¯åŠ¨æœåŠ¡**
   ```bash
   pdf2zh --fastapi
   ```

4. **æµ‹è¯•ç¿»è¯‘**
   ```bash
   curl -X POST http://localhost:8000/translate/mono \
     -F "file=@example.pdf" \
     -F "service=google" \
     --output translated.pdf
   ```

---

## ğŸ’¡ æç¤º

- æ¼”ç¤ºç‰ˆæœ¬å¯ä»¥ç”¨æ¥æµ‹è¯• API é›†æˆ
- å®Œæ•´ç‰ˆæœ¬æ”¯æŒ 20+ ç¿»è¯‘æœåŠ¡
- è¯¦ç»†æ–‡æ¡£å‚è§ `docs/FASTAPI.md`
- å¦‚æœ‰é—®é¢˜ï¼ŒæŸ¥çœ‹ `TEST_REPORT.md`

---

## ğŸ› å·²çŸ¥é—®é¢˜

1. **Python ç‰ˆæœ¬**: å½“å‰ç¯å¢ƒæ˜¯ 3.13.3ï¼Œéœ€è¦ 3.10-3.12
2. **ä¾èµ–å†²çª**: babeldoc å’Œ rapidocr-onnxruntime ç‰ˆæœ¬å†²çª

**å»ºè®®**: ä½¿ç”¨ Docker éƒ¨ç½²æˆ–åˆ‡æ¢åˆ°å…¼å®¹çš„ Python ç‰ˆæœ¬
